# Evaluating tuning strategies for random forest hyperparameters with regards to prediction performance of clinical prediction models and computational time

## What to run?

### To reproduce the research report (preliminary results)

.R scripts (as opposed to .Rmd files) are necessary as they are loaded by the .Rmd files. The .R files in the ResearchReport folder are prior versions of the .R files outisde this folder: this is so that the report can be reproduced exactly as it was. Data is loaded within the .Rmd files. If wanting to fully reproduce the entire study, run Study1_pilot.Rmd (but be aware that this can take up to 19 hours), then ResearchReport.Rmd. Data generated by Study1_pilot.Rmd (i.e., information on how each tuning procedure performed on each dataset, which is the data used to generate tables and figures in the study) is saved in pilot.RData and loaded in ResearchReport.Rmd, so one may choose to run only ResearchReport.Rmd.

### To reproduce the study

This is not possible as of yet.

## Folder structure

├── DGM_data - folder containing data relating to the data-generating mechanisms - all files are generated by DGM_scenarios_betas.Rmd

    ├── betas.RData - contains the regression coefficients as generated by DGM_scenarios_betas.Rmd (chunk 5)

    ├── betas_validation.RData - contains information relating to the validation procedure of the regression coefficients, as generated by DGM_scenarios_betas.Rmd (chunks 6 and 7)

    ├── scenarios.RData - contains the full information on scenarios (following sample size calculations) as computed by DGM_scenarios_betas.Rmd (chunk 4)

├── Proposal

    ├── Fig1.Rmd - code to generate the figure in the proposal
    
    ├── Thesis.bib - bibliography file for the proposal
    
    ├── ThesisProposal_JudithNeve_MSBBSS.pdf - rendered version of the proposal
    
    ├── ThesisProposal_JudithNeve_MSBBSS.tex - LaTeX code for the proposal
    
    ├── figure1.jpg - image generated by Fig1.Rmd
    
├── Protocol

    ├── Protocol figures - folder containing necessary images for rendering the other documents
    
    ├── Protocol_presentation.pdf - rendered version of a presentation given at the Julius Centrum's method meeting on Nov. 14, 2022
    
    ├── Simulation_protocol.pdf - rendered version of the simulation protocol (acting as a pre-registration)
    
    ├── protocol_presentation.tex - LaTeX code for the presentation given at the Julius Centrum's method meeting on Nov. 14, 2022
    
    ├── simulation_protocol.tex - LaTeX code for the simulation protocol (acting as a pre-registration)
    
├── ResearchReport - folder containing a smaller version of the full study, used to generate preliminary results for January 2023 (files in this folder correspond to the files in the Study 1 folder present on this repository before February 2023)

    ├── Data - folder containing simulated data
    
        ├── betas.RData - contains the regression coefficients as computed by chunks 1-5 of Study1_pilot.Rmd (approx. 3 hours' runtime)
        
        ├── pilot.RData - contains the R environment obtained by running Study1_pilot.Rmd (approx. 19 hours' runtime) - NOTE: chunks 4 and 5 can be skipped to reduce to 16 hours.
        
        ├── scenarios.RData - contains the full information on scenarios (following sample size calculations) as computed by chunks 1-4 of Study1_pilot.Rmd (approx. 10 minutes' runtime)
    
    ├── DataSimFunctions.R - file containing functions to generate data
    
    ├── GenerateBetas_RR.R - file containing functions to generate regression coefficients
    
    ├── PerformanceMetrics.R - file containing functions to evaluate predictive performance
    
    ├── ResearchReport.Rmd - R markdown code to generate a report on preliminary results for study 1
    
    ├── ResearchReport.pdf - rendered version of the report on preliminary results for study 1 - uses data generated by Study1_pilot.Rmd
    
    ├── Study1_pilot.Rmd - generates data on tuning procedures used in ResearchReport.Rmd (approx. 19 hours' runtime) - NOTE: chunks 4 and 5 can be skipped to reduce to 16 hours.
    
    ├── Thesis.bib - bibliography file used for the report
    
    ├── TuningFunctions.R - file containing functions to tune random forests
    
    ├── sessionInfo.R - file generating the sessionInfo.txt file
    
    ├── sessionInfo.txt - file containing information regarding system, R, and package versions used
    
├── Study1 - folder containing files used specifically only in Study 1

    ├── Data - folder containing simulated data
    
        ├── select_minnodesize.RData - data generated by SensitivityAnalysisMinNodeSize_execute.R
    
        ├── select_mtry.RData - data generated by SensitivityAnalysisMtry_execute.R
    
        ├── select_samplefrac.RData - data generated by SensitivityAnalysisSampleFraction_execute.R

    ├── SensitivityAnalysisMinNodeSize_execute.R - script generating data to determine values of min.node.size to include in the tuning grid

    ├── SensitivityAnalysisMtry_execute.R - script generating data to determine values of mtry to include in the tuning grid

    ├── SensitivityAnalysisSampleFraction_execute.R - script generating data to determine values of sample.fraction to include in the tuning grid

    ├── SensitivityAnalysis_plots.Rmd - visual examination of the sensitivity analysis files to determine the tuning grid

    ├── Study1_execute.R - script generating data for study 1: the effect of tuning combination on model performance - one run of this script generates one observation for one scenario

├── .gitignore - defines files that do not need tracking

├── DGMFunctions.R - file containing functions to generate regression coefficients

├── DGM_scenarios_betas.Rmd - script generating data in DGM_data

├── DGM_scenarios_betas_sessionInfo.txt - file containing session info from DGM_scenarios_betas.Rmd

├── DataSimFunctions.R - file containing functions to simulate data under logistic regression with interactions

├── PerformanceMetricsFunctions.R - file containing functions to evaluate model predictive performance

├── README.md - this document

├── Thesis.Rproj - project that contains all files

├── TuningFunctions.R - file containing functions to tune random forests

├── bibliography.bib - file containing information for all references used in this project

├── study1_16pred_1-?.sh - files used to run a batch of observations for the 16 predictors scenarios

├── study1_8pred_1-?.sh - files used to run a batch of observations for the 8 predictors scenarios


Note: folders for study 2 and study 3 will be added when those studies begin.
